<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OXYZ Pong Game</title>
    <style>
        body {
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 95vh;
            font-family: sans-serif;
        }
        .title{
            margin-bottom: 20px;
            font-size: 32px;
            font-weight: 700;
        }
        #gameCanvas {
            border: 1px solid #000;
        }
        .footer{
            display: flex;
            width: 800px;
            justify-content: space-between;
        }
    </style>
</head>
<body>
<div class="title">OXYZ PONG GAME</div>
<div class="game-container">
    <canvas id="gameCanvas" width="800" height="600"></canvas>
</div>
<div class="footer">
    <div class="player-one-controls">
        <div>W - move UP</div>
        <div>S - move DOWN</div>
    </div>
    <div class="start-controls" id="startControls">
        <div>Press SPACE to start</div>
    </div>
    <div class="player-two-controls">
        <div>↑ - move UP</div>
        <div>↓ - move DOWN</div>
    </div>
</div>

<script>
    // Get the canvas element
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Set the canvas dimensions
    canvas.width = 800;
    canvas.height = 600;

    // Define the game variables
    let ballX = canvas.width / 2;
    let ballY = canvas.height / 2;
    let ballSpeedX = 5 / 1.5;
    let ballSpeedY = 5 / 1.5;
    let paddle1Y = canvas.height / 2;
    let paddle2Y = canvas.height / 2;
    let score1 = 0;
    let score2 = 0;
    let roundStartTime = 0; // Track the start time of the round
    let ballFrozen = true; // Flag to indicate if the ball is frozen
    let speedIncreaseInterval = 5000; // Interval for speed increase (5 seconds)
    let lastSpeedIncrease = 0; // Track the last time the speed was increased

    // Draw the game elements
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#000';
        ctx.fillRect(0, paddle1Y - 50, 10, 100);
        ctx.fillRect(canvas.width - 10, paddle2Y - 50, 10, 100);
        ctx.beginPath();
        ctx.arc(ballX, ballY, 10, 0, Math.PI * 2);
        ctx.fill();
        ctx.font = '24px Arial';
        ctx.textAlign = 'left';
        ctx.textBaseline = 'top';
        ctx.fillStyle = '#000';
        ctx.fillText(`Score: ${score1}`, 10, 10);
        ctx.textAlign = 'right';
        ctx.fillText(`Score: ${score2}`, canvas.width - 10, 10);
    }

    // Update the game state
    function update() {
        if (ballFrozen) {
            // If the ball is frozen, check if the freeze time has expired
            if (Date.now() - roundStartTime > 1000 && Date.now() - roundStartTime < 2000) {
                // If the freeze time has expired, unfreeze the ball
                ballFrozen = false;
            }
        } else {
            // If the ball is not frozen, update its position
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            // Collision with top and bottom boundaries
            if (ballY < 0 || ballY > canvas.height) {
                ballSpeedY = -ballSpeedY;
            }

            // Collision with paddles
            if (ballX < 10 && ballY > paddle1Y - 50 && ballY < paddle1Y + 50) {
                ballSpeedX = -ballSpeedX;
            } else if (ballX > canvas.width - 20 && ballY > paddle2Y - 50 && ballY < paddle2Y + 50) {
                ballSpeedX = -ballSpeedX;
            }

            // Score points
            if (ballX < 0) {
                score2++;
                ballX = canvas.width / 2;
                ballY = canvas.height / 2;
                roundStartTime = Date.now(); // Reset the round start time
                ballFrozen = true; // Freeze the ball
                ballSpeedX = 5 / 1.5; // Reset the ball speed
                ballSpeedY = 5 / 1.5;
                lastSpeedIncrease = 0; // Reset the last speed increase time
            } else if (ballX > canvas.width) {
                score1++;
                ballX = canvas.width / 2;
                ballY = canvas.height / 2;
                roundStartTime = Date.now(); // Reset the round start time
                ballFrozen = true; // Freeze the ball
                ballSpeedX = 5 / 1.5; // Reset the ball speed
                ballSpeedY = 5 / 1.5;
                lastSpeedIncrease = 0; // Reset the last speed increase time
            }

            // Increase the ball speed every 5 seconds
            if (Date.now() - lastSpeedIncrease > speedIncreaseInterval) {
                ballSpeedX *= 1.2;
                ballSpeedY *= 1.2;
                lastSpeedIncrease = Date.now();
            }

            // Check for game over
            if (score1 === 10 || score2 === 10) {
                alert(`Game Over! Player ${score1 > score2 ? 1 : 2} wins!`);
                score1 = 0;
                score2 = 0;
            }
        }
    }

    // Handle the start of a new round
    function startRound() {
        roundStartTime = Date.now();
        ballFrozen = true;
        ballX = canvas.width / 2;
        ballY = canvas.height / 2;
        ballSpeedX = 5 / 1.5;
        ballSpeedY = 5 / 1.5;
        lastSpeedIncrease = 0;
        document.getElementById('startControls').remove()
    }

    // Handle keyboard input
    document.addEventListener('keydown', (e) => {
        console.log(`Key pressed: ${e.key}`);
        if (e.key === 'ArrowUp') {
            paddle2Y = Math.max(paddle2Y - 20, 50);
        } else if (e.key === 'ArrowDown') {
            paddle2Y = Math.min(paddle2Y + 20, canvas.height - 50);
        } else if (e.key === 'w' || e.key === 'W') {
            paddle1Y = Math.max(paddle1Y - 20, 50);
        } else if (e.key === 's' || e.key === 'S') {
            paddle1Y = Math.min(paddle1Y + 20, canvas.height - 50);
        } else if (e.key === ' ' ) {
            // Call the startRound function when the game starts
            startRound();
        }
    });

    // Main game loop
    setInterval(() => {
        draw();
        update();
    }, 16);
</script>
</body>
</html>
